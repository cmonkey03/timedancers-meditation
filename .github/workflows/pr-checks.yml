name: Basic PR Checks

on:
  pull_request:
    branches: [ main ]
    types: [opened, synchronize, reopened]

jobs:
  # Simple checks - Expo GitHub integration handles the heavy lifting
  basic-checks:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20.19.4'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci --include=dev

      - name: Run Unit Tests
        run: npm test

      - name: Run Linting
        run: npm run lint

      - name: PR Summary
        run: |
          echo "## ðŸ“‹ Pull Request Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Unit Tests**: Passed" >> $GITHUB_STEP_SUMMARY
          echo "âœ… **Linting**: Passed" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Expo GitHub Integration Status:**" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ” Expo will run additional checks automatically" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ“± Build status will appear in PR checks" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸš€ Auto-deployment configured for main branch" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**TimeDancers Meditation App Features:**" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ§˜â€â™€ï¸ Magical chakra orb meditation timer" >> $GITHUB_STEP_SUMMARY
          echo "- â±ï¸ Phase-based timing with drift prevention" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸ”Š Volume controls for meditation chimes" >> $GITHUB_STEP_SUMMARY
          echo "- ðŸŽ¨ Polished UI with smooth animations" >> $GITHUB_STEP_SUMMARY
